openapi: "3.1.0"

info:

  title: "Bathysphere"
  version: "3.0.0"
  description: |

    Bathysphere is a graph-native store and registry for public and proprietary Ocean data. We ingest heterogenous sensor and simulation data and parse them into discoverable databases, accessible to both humans and machines. 
    
    You probably have to share data anyway. Our software can enhance your data science and management experience by providing granular access control and provenance tracking based on open standards. 
    
    By assessing data and service availability over shared domain, projects can allocate resources to fill coverage gaps, share assets, and eliminate redundant operational and capital expenses.

  contact:
    name: Oceanicsdotio LLC
    url: http://www.oceanics.io
    email: wave@oceanics.io

  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

  x-logo:
    url: https://www.oceanics.io/logo.png

tags:

  - name: Catalog
    description: Access metadata about collections.

  - name: Collection
    description: Access groups of entities sharing a type.

  - name: Entity
    description: Manage a single entity or pair of entities.

  - name: Topology
    description: Create and access entity relationship metadata.

servers:
- url: https://www.oceanics.io/{basePath}
  description: Production API server
  variables:
    basePath:
      default: api
- url: https://localhost:8888/{basePath}
  description: Local development server
  variables:
    basePath:
      default: api

paths:
      
  /:
  
    get:
      tags: [ Catalog ]
      summary: Catalog Metadata
      security:
        - BearerAuth: []
      description: |
        Get all entity types in database as collections following the SpatioTemporal Asset Catalog specification

      parameters:

        - name: asset
          in: query
          schema:
            type: string
            default: index

        - name: extension
          description: |
            Any entity can be linked topologically to any other entity, but generally
            these are grouped in functional sets by application area:
            * `sensing` implements Open Geospatial Consortium SensorThings specification (part 1),
            and has models relevant to operating and getting data from sensor networks.
            * `tasking` builds off of the SensorThings specification part 2.
            * `mesh` implements structures for spatial simulations.

          in: query
          schema:
            type: string
            enum: [sensing, mesh, tasking, admin, catalog]

      responses:
        '200':
          description: Catalog

    delete:
      tags: [Catalog]
      summary: Delete Catalog
      security:
        - BearerAuth: []
      description: |
        Delete all data connected to account.

      responses:
        '204':
          description: No content
        '400':
          $ref: '#/components/responses/BadRequest'

  /{entity}:

    post:
      tags: [Entity, Collection]
      summary: Create Entity
      security:
        - BearerAuth: []
      description: |
        Create a new entity.
      parameters:
        - $ref: "#/components/parameters/entityClass"
      requestBody:
        $ref: '#/components/requestBodies/Entity'
      responses:
        '200':
          $ref: '#/components/responses/Entity'
        '400':
          $ref: '#/components/responses/BadRequest'

    get:
      tags: [Collection]
      summary: Collection Metadata
      security:
        - BearerAuth: []
      description: |
        Get all entities of one type

      parameters:
        - $ref: "#/components/parameters/entityClass"

      responses:
        '200':
          $ref: '#/components/responses/EntityCollection'
        '404':
          $ref: '#/components/responses/NotFound'


  /{entity}({uuid}):

    get:
      tags: [ Entity ]
      summary: Entity Metadata
      security:
        - BearerAuth: []
      description: Get entity
      parameters:
        - $ref: "#/components/parameters/entityClass"
        - $ref: "#/components/parameters/entityId"
      responses:
        '200':
          $ref: '#/components/responses/Entity'
        '404':
          $ref: '#/components/responses/NotFound'

    put:
      tags: [ Entity ]
      summary: Update Entity
      security:
        - BearerAuth: []
      description: Update entity
      requestBody:
        $ref: '#/components/requestBodies/Entity'

      parameters:
        - $ref: "#/components/parameters/entityClass"
        - $ref: "#/components/parameters/entityId"

      responses:
        '200':
          $ref: '#/components/responses/Entity'
        '404':
          $ref: '#/components/responses/NotFound'

    delete:
      tags: [ Entity ]
      summary: Delete Entity
      security:
        - BearerAuth: []
      description: Delete entity and orphans recursively.
      parameters:
        - $ref: "#/components/parameters/entityClass"
        - $ref: "#/components/parameters/entityId"

      responses:
        '204':
          description: No content
        '404':
          $ref: '#/components/responses/NotFound'

  /{root}({rootId})/{entity}:

    get:
      tags: [ Topology, Entity, Collection ]
      summary: Connected Entities
      security:
        - BearerAuth: []
      description: |
        Get related entities

      parameters:
        - $ref: "#/components/parameters/root"
        - $ref: "#/components/parameters/rootId"
        - $ref: "#/components/parameters/entityClass"
        - $ref: "#/components/parameters/label"

      responses:
        '200':
          $ref: '#/components/responses/EntityCollection'
        '400':
          $ref: '#/components/responses/BadRequest'


  /{root}({rootId})/{entity}({uuid}):

    post:
      tags: [ Topology, Entity ]
      summary: Join Entity Pair
      security:
        - BearerAuth: []
      description: Create a labeled relationship between entities.
      parameters:
        - $ref: "#/components/parameters/root"
        - $ref: "#/components/parameters/rootId"
        - $ref: "#/components/parameters/entityClass"
        - $ref: "#/components/parameters/entityId"
        - $ref: "#/components/parameters/label"

      responses:
        '204':
          description: No Content
        '400':
          $ref: '#/components/responses/BadRequest'

    delete:
      tags: [ Topology, Entity ]
      summary: Drop Relationship
      security:
        - BearerAuth: []
      description: |
        Remove a labeled relationship between entities. If no `label` is specified, remove all
        relationships between the entities.

      parameters:
        - $ref: "#/components/parameters/root"
        - $ref: "#/components/parameters/rootId"
        - $ref: "#/components/parameters/entityClass"
        - $ref: "#/components/parameters/entityId"
        - $ref: "#/components/parameters/label"

      responses:
        '204':
          description: No Content
        '400':
          $ref: '#/components/responses/BadRequest'


components:

  securitySchemes:

    BearerAuth:
      type: http
      in: header
      scheme: bearer

  parameters:

    root:
      in: path
      required: true
      name: root
      description: |
        The class name of the root or parent entity that the request object is associated with. During a `GET` request
        this will be used to collect child entities based on graph relationship. For `PUT` and `POST` requests this
        and the child entities will be linked with a labeled relationship.

      schema:
        type: string

    rootId:
      in: path
      required: true
      name: rootId
      description: |
        Unique integer identifier of the parent entity.
      schema:
        type: string

    entityClass:
      in: path
      required: true
      name: entity
      description: |
        Name of the entity model to create or fetch.

      schema:
        type: string
        enum:
          - DataStreams
          - Observations
          - HistoricalLocations
          - Locations
          - Sensors
          - Things
          - ObservedProperties
          - Tasks
          - Actuators
          - TaskingCapabilities
          - FeaturesOfInterest
          - Collections

    entityId:
      in: path
      required: true
      name: uuid
      description: |
        Unique identifier of the resource to be retrieved.
      schema:
        type: string

    label:
      in: query
      name: label
      description: |
        Should be in format `LABEL`, although this is not strictly necessary. Labeled relationships
        are used to crawl over the graph.
      schema:
        type: string

    ObjectKey:
      in: path
      name: objectKey
      required: true
      description: UUID of experiment data
      schema:
        type: string

    ThingId:
      in: path
      name: thingId
      required: true
      description: Unique identifier of the object to copy.
      schema:
        type: integer
        minimum: 0

    configId:
      in: query
      name: configId
      description: |
        A reference to a model configuration can be used instead of supplying values for `runs`, `workers`, `dt`, and
        `days`.
      schema:
        type: integer

  requestBodies:

    Asset:
      description: |
        Tell the server where to find the data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Asset'
          
    Collection:
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Collection'

    CollectionUpdate:
      description: |
        Relabel or index an entity collection

      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CollectionOptions'

    Memos:
      description: Create and retrieve content data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Memos'

    Entity:
      description: |
        Entity
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '#/components/schemas/Things'
              - $ref: '#/components/schemas/Locations'
              - $ref: '#/components/schemas/HistoricalLocations'
              - $ref: '#/components/schemas/DataStreams'
              - $ref: '#/components/schemas/Observations'
              - $ref: '#/components/schemas/ObservedProperties'
              - $ref: '#/components/schemas/Sensors'
              - $ref: '#/components/schemas/FeaturesOfInterest'
              - $ref: '#/components/schemas/Collection'

  responses:

    Asset:
      description: |
        Description of the file
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Asset'

    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
            
    Collection:
      description: Collection
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Collection'

    Memos:
      description: Memos
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Memos'

    Entity:
      description: |
        Single entity
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '#/components/schemas/Things'
              - $ref: '#/components/schemas/Locations'
              - $ref: '#/components/schemas/HistoricalLocations'
              - $ref: '#/components/schemas/DataStreams'
              - $ref: '#/components/schemas/Observations'
              - $ref: '#/components/schemas/ObservedProperties'
              - $ref: '#/components/schemas/Sensors'
              - $ref: '#/components/schemas/FeaturesOfInterest'
              - $ref: '#/components/schemas/Memos'

    EntityCollection:
      description: |
        Collection of entities

      content:
        application/json:
          schema:
            $ref: '#/components/schemas/EntityCollection'
    Message:
      description: Success
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Message'
                
    NotFound:
      description: Not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

    TokenResponse:
      description: Auth token
      content:
        application/json:
          schema:
            type: object
            properties:

              token:
                description: JWT Bearer token containing user ID
                type: string
                minLength: 127

              duration:
                type: integer
                description: JWT expiration interval in seconds
                default: 600
                minimum: 30
                maximum: 3600

    ServerError:
      description: Server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

    Unauthorized:
      description: Not authorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'

  schemas:

    Agents:
      examples:
        - name: Arthur Machen
        - name: Octavia Butler
      type: object
      additionalProperties: false
      required: [uuid, name]
      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        name:
          type:
            - "string"
            - "null"
          description: Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.
            
    Asset:
      type: object

    CollectionOptions:
      allOf:
        - $ref: '#/components/schemas/Collection'
        - type: object
          properties:

            label:
              $ref: '#/components/schemas/EntityLabel'

            indexBy:
              type: string
              default: id
              enum:
                - id
                - location
                - ts
              description: |
                Node attribute to create an index on.

    Memos:
      type: object
      properties:
        uuid:
          type: string
        publication:
          type: string
        published:
          type: date-time
        labels:
          type: array
          items:
            type: object
            properties:
              value:
                type: string
        authors:
          type: array
          items:
            type: string
        title:
          type: string
        description:
          type: string
        volume:
          type: string
        pages:
          type: array
          items:
            type: array
            items:
              type: number
              format: integer

    EntityLabel:
      type: string
      enum:
        - Proxy
        - Buoy
        - Server
        - Metadata
        - File
        - Raw
      description: |
        Additional node labels that can be applied to entities, which have internal meaning.

    Message:
      type: object
      properties:
        message:
          type: string
          description: Status message

    Index:
      type: string
      description: Class name of entities to index.

    SecretKey:
      description: |
        Your secret key is used to encrypt traffic and private data, such as your login credentials. If you do not
        provide your own key, a default secret will be used. If you do provide a secret key, make sure to save it.
        It is not possible for us to recover data encrypted with a user secret.

      type: string

    EntityCollection:
      allOf:
        - $ref: '#/components/schemas/Collection'
        - type: object
          properties:
            "@iot.count":
              type: integer
              minimum: 1
              maximum: 100
              description: Total number of records in the response
            value:
              type: array
              description: Array of response data
              items:
                oneOf:
                  - $ref: '#/components/schemas/Things'
                  - $ref: '#/components/schemas/Locations'
                  - $ref: '#/components/schemas/HistoricalLocations'
                  - $ref: '#/components/schemas/DataStreams'
                  - $ref: '#/components/schemas/Observations'
                  - $ref: '#/components/schemas/ObservedProperties'
                  - $ref: '#/components/schemas/Sensors'
                  - $ref: '#/components/schemas/FeaturesOfInterest'
                  - $ref: '#/components/schemas/Memos'
        

    EntityClass:
      type: string
      enum:
        - DataStreams
        - FeaturesOfInterest
        - Locations
        - Observations
        - ObservedProperties
        - Sensors
        - Things
        - Collections
        - Actuators
        - TaskingCapabilities
        - Tasks
        - Memos

    FeaturesOfInterest:
      examples:
        - name: Damariscotta River Estuary shellfish production
          description: Dynamics of a traditional growing area for oysters in Maine.
      type: object
      title: FeaturesOfInterest
      description: |
        `FeaturesOfInterest` are similar to `Locations`, in that they are spatial phenomena. However, 
        they may be poorly defined in space and time, and therefore are represented through linked 
        `Observations`. 
      additionalProperties: false
      required: [uuid, name]
      properties:
        uuid:
          type: string
          format: uuid
          description: Globally unique identifier for `FeaturesOfInterest`.
        name:
          type:
            - "string"
            - "null"
          description: Human readable name for displaying data. This may change over time.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.

        encodingType:
          type: string
          description: Identifier for parsing feature data

        feature:
          type: object
          description: Feature data

        Observations@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

    Things:
      title: "Things"
      examples:
        - name: Sealab
        - name: R/V Lloigor

      type: object
      description: |
        `Things` are objects of the physical or information world that can be identified
        and integrated into communication networks.
      required: [uuid, name]
      additionalProperties: false
      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique identifier for entity. This is usually auto-generated, 
            but different than the default node IDs within the Neo4j database, 
            since those are not guaranteed to persist.
        name:
          type:
            - "string"
            - "null"
          description: |
            Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: |
            Short but useful explanation of what the entity is.

        properties:
          type: object
          description: Key-value properties

        HistoricalLocations@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

        Locations@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

        DataStreams@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

    Locations:
      examples:
        - name: Lower Damariscotta
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [43.93354, -69.58344]
        - name: Upper Damariscotta Estuary
          encodingType: application/vnd.geo+json
          description: Buoy deployment
          location:
            type: Point
            coordinates: [ 43.998178, -69.54253, 0.0 ]
        - name: Wood Island Harbor
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 43.456550, -70.344432 ]
        - name: Ram Island Saco Bay
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 43.465934, -70.359646 ]
        - name: Upper New Meadows
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 43.863669, -69.8984055 ]  # Bombazine
        - name: Lower New Meadows
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 43.77643055, -69.89196944 ]  # Sand Cove
        - name: Bagaduce River
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 44.40156667, -68.7738333 ]
        - name: Machias Bay
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 44.618517, -67.318033 ]
        - name: Cobscook Bay
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 44.8968, -67.0651 ]
        - name: Western Passage
          encodingType: application/vnd.geo+json
          location:
            type: Point
            coordinates: [ 44.92017, -66.995833 ]

      type: object
      title: Locations
      description: |
        Last known location of a thing. May be a feature of interest, unless remote sensing.
      additionalProperties: false
      required: [uuid, location, encodingType]
      properties:

        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        name:
          type:
            - "string"
            - "null"
          description: Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.

        encodingType:
          type: string
          enum:
            - "application/vnd.geo+json"
          default: "application/vnd.geo+json"
          description: The encoding rendered in the location response

        location:
          type: object
          additionalProperties: false
          properties:
            type:
              type: string
              description: |
                The type of geometry, limited to values we know how to process. 
                This includes `Point` and `Polygon` geometries.
              enum: ["Point", "Polygon"]
            coordinates:
              type: array
              description: |
                Spatial coordinates. Need the type and encoding to be sure how to interpret.
              minLength: 2
              maxLength: 3
              items:
                type: number
                format: float

        HistoricalLocations@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

        Things@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

    HistoricalLocations:
      examples:
       - time: "2020-04-01T09:00:00Z"
         Things@iot.navigation:
          - name: [ R/V Lloigor ]
         Locations@iot.navigation:
          - name: [ Wood Island Harbor ]

      type: object
      title: HistoricalLocations
      additionalProperties: false
      description: |
        `HistoricalLocations` create a timestamped relationship between `Locations`,
        and `Things`, which move over time. This allows you to use either position or time
        to query related data in the graph.
      required: [ uuid, time ]
      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        time:
          type: string
          format: date-time
          description: Timestamp when the location was current

        Things@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              minItems: 1
              maxItems: 1
              items:
                type: string

            - type: array
              title: objects
              minItems: 1
              maxItems: 1
              items:
                type: object

        Locations@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              minItems: 1
              items:
                type: string

            - type: array
              title: objects
              minItems: 1
              items:
                type: object

    Sensors:
      examples:
        - name: SeaBird Electronics CTD
          description: A common oceanographic sensing package
        - name: Chlorophyll fluorometer
          description: For measuring plankton stuff
      type: object
      title: Sensors
      description: |
        `Sensors` contain technical and codec data about `DataStreams`. You might think
        they are connected to `Things`, and they are, but only through multi-segment links.
      additionalProperties: false
      required: [ uuid, name ]
      properties:

        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        name:
          type:
            - "string"
            - "null"
          description: Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.

        encodingType:
          type: string
          description: |
            Explains the format of `metadata`.
          enum: [application/pdf, "http://www.opengis.net/doc/IS/SensorML/2.0"]
          default: "http://www.opengis.net/doc/IS/SensorML/2.0"

        metadata:
          type: object
          description: |
            Metadata about the sensor. Contents are described by the `encodingType`
            property.

        DataStreams@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

    DataStreams:
      examples:
        - Things@iot.navigation:
            - name: [ Land Ocean Biogeochemical Observatory ]
          Sensors@iot.navigation:
            - name: [ SeaBird Electronics CTD ]
          ObservedProperties@iot.navigation:
            - name: [ temperature ]
          name: temperature
          description: An example synthetic temperature series
        - Things@iot.navigation:
            - name: [ Land Ocean Biogeochemical Observatory ]
          ObservedProperties@iot.navigation:
            - name: [ chlorophyll ]
          name: chlorophyll
          description: Just another chlorophyll series
      type: object
      title: DataStreams
      description: |
        `DataStreams` are collections of `Observations` from the same `Sensors`. These time series
        are one of the central models, and connect many of the other nodes. 
        We support in browser data visualization and analysis.
      additionalProperties: false
      required: [ uuid, name ]
      properties:

        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier across `DataStreams` and all other
            types of entity.

        name:
          type:
            - "string"
            - "null"
          description: |
            Human readable `DataStreams` name for displaying data. 
            This need not be unique, but it is helpful if it is.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.

        unitOfMeasurement:
          type: object
          description: |
            Unified Code for Unit of Measure

          properties:
            name:
              type: string
              description: Name for matching and displaying

            symbol:
              type:
                - "string"
                - "null"
              description: Abbreviation for the parameter

            definition:
              type:
                - "string"
                - "null"
              description: A link to a formal definition

        observationType:
          type:
            - "string"
            - "null"
          description: |
            Data model of child `Observations`. Usually an `OM_Measurement`.
          enum:
            - "OM_CategoryObservation"
            - "OM_CountObservation"
            - "OM_Measurement"
            - "OM_Observation"
            - "OM_TruthObservation"

        observedArea:
          type: [object, "null"]
          readOnly: true
          description: |
            The bounding box that encloses all `FeaturesOfInterest` referenced by child `Observations`

        phenomenonTime:
          type: array
          description: |
            Time interval of the measured process, consisting of two ISO8601 timestamps.
          minItems: 2
          maxItems: 2
          items:
            type: string
            format: date-time

        resultTime:
          type: array
          description: |
            Time interval of receiving data, consisting of two ISO8601 timestamps. May be different than the
            measured process, due to batch uploads, latency, lack of real-time clocks in devices, etc.
          minItems: 2
          maxItems: 2
          items:
            type: string
            format: date-time

        Observations@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              items:
                type: string

            - type: array
              title: objects
              items:
                type: object

        ObservedProperties@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              minItems: 1
              items:
                type: string

            - type: array
              title: objects
              minItems: 1
              items:
                type: object

        Sensors@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              minItems: 1
              items:
                type: string

            - type: array
              title: objects
              minItems: 1
              items:
                type: object

        Things@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              minItems: 1
              items:
                type: string

            - type: array
              title: objects
              minItems: 1
              items:
                type: object


    Observations:
      examples: 
        - DataStreams@iot.navigation:
            - name: [ temperature ]
          resultTime: "2020-04-01T09:00:00Z"
          result: 10.0

        - DataStreams@iot.navigation:
            - name: [ temperature ]
          resultTime: "2018-04-01T09:45:00Z"
          result: 11.7
      type: object
      title: Observations
      description: |
        `Observations` are connecting nodes in a multi-segment path between `DataStreams` 
        and `FeaturesOfInterest`. You might want to directly access this resource for
        data annotation or correction.
      additionalProperties: false
      required: [uuid, resultTime, result]
      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        resultTime:
          type: string
          format: date-time
          description: |
            Timestamp when the `Observation` was registered by the system.

        resultQuality:
          type: string
          description: |
            Quality of the result described as a `DQ_Element` (OGC)

        validTime:
          type: array
          description: Time interval when the result is valid
          minItems: 2
          maxItems: 2
          items:
            type: string
            format: date-time

        phenomenonTime:
          type: string
          format: date-time
          description: |
            Timestamp of the acquisition of the `Observation`

        result:
          description: The result of the observation. Usually a number.
          type: number
          format: float

        parameters:
          type: object
          description: Environmental conditions during the `Observation`

        DataStreams@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              maxItems: 1
              items:
                type: string

            - type: array
              title: objects
              maxItems: 1
              items:
                type: object

        FeaturesOfInterest@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              maxItems: 1
              items:
                type: string

            - type: array
              title: objects
              maxItems: 1
              items:
                type: object

    Tasks:
      examples:
        - Locations@iot.navigation:
            - name: [Wharf]
          name: Do a thing
        - Locations@iot.navigation:
            - name: [Wharf]
          name: Fix me
        - Locations@iot.navigation:
            - name: [Farm]
          name: Harvest
      type: object
      additionalProperties: false
      required: [uuid, name]
      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        name:
          type:
            - "string"
            - "null"
          description: Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.
        Locations@iot.navigation:
          readOnly: true
          oneOf:
            - type: array
              title: references or objects
              maxItems: 1
              items:
                oneOf: 
                  - type: string
                  - type: object
        TaskingCapabilities@iot.navigation:
          readOnly: true
          oneOf:
            - type: array
              title: references or objects
              maxItems: 1
              items:
                oneOf: 
                  - type: string
                  - type: object
        
    ObservedProperties:
      examples:
        - name: colored dissolved organic matter
          description: Optically active material suspended in water
        - name: salinity
          description: Seawater salinity
        - name: temperature
          description: Measured through a thermistor or remote sensing
        - name: chlorophyll
          description: Measure of chlorophyll
        - name: oxygen
        - name: oxygen percent
        - name: transmission
        - name: oxygen saturation
        - name: conductivity
        - name: photosynthetically active radiation
        - name: turbidity
        - name: voltage
          description: Electrical voltage or sensor or power source
        - name: water velocity

      type: object
      title: ObservedProperties
      description: |
        `ObservedProperties` describe `DataStreams`.
      additionalProperties: false
      required: [uuid, name]
      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        name:
          type:
            - "string"
            - "null"
          description: Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.

        definition:
          type:
            - "string"
            - "null"
          description: Reference to resource that defines the property.

        DataStreams@iot.navigation:
          readOnly: true
          oneOf:

            - type: array
              title: references
              maxItems: 1
              items:
                type: string

            - type: array
              title: objects
              maxItems: 1
              items:
                type: object

    Collection:
      title: stacCollection
      examples:
        - name: Oysters
          description: Oyster data
          license:
          version: 1
          keywords: oysters,aquaculture,Maine,ShellSIM
        - name: Limited purpose aquaculture sites
          description: Temporary sites with a small footprint
      type: object
      description: |
        SpatioTemporal Asset Catalog object-linking collection object. Collections are generic, while some
        SensorThings entities are special Collections. For instance, a `DataStreams` is a collection of
        `Observations`.

      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        name:
          type:
            - "string"
            - "null"
          description: Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.

        extent:
          $ref: '#/components/schemas/Extent'

    Extent:
      title: extent
      type: [object, "null"]
      readOnly: true
      description: |
        Spatiotemporal extent of a data `Collection`. Contains a 2 or 3-D `spatial` extent, and a `temporal`
        interval.

      properties:

        spatial:
          type: array
          minLength: 4
          maxLength: 6
          items:
            type: number
            format: float

        temporal:
          type: string
          description: ISO format timestamp interval


    Provider:
      title: dataProvider
      examples:
        - name: Public
          description: Public Data Repository
        - name: Oceanicsdotio
          description: Research and development
          domain: oceanics.io
          owner: true
      type: object
      description: |
        Data providers are organizations or individuals that produce, process, host, or license data.

      properties:
        uuid:
          type: string
          format: uuid
          description: |
            Unique integer identifier for entity.

        name:
          type:
            - "string"
            - "null"
          description: Human readable entity name for displaying data.

        description:
          type:
            - "string"
            - "null"
          description: Short but useful explanation of what the entity is.

        url:
          type: string
          description: URL to organization website

        roles:
          type: array
          description: |
            Data providers are labeled with a role, so that attribution and redaction works properly on synthesized
            datasets.
          items:
            title: providerRole
            type: string
            enum:
              - licensor
              - producer
              - processor
              - host

    Error:
      type: object
      properties:
        message:
            type: string
